<!DOCTYPE html>
<html lang="no" dir="ltr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Skole√•r 2025/2026 - Bari Plux</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://i.postimg.cc/65cjsvfQ/imglogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.postimg.cc/65cjsvfQ/imglogo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <style>
        :root{
          --bg-1: #0f1115;
          --bg-2: #15171b;
          --glass-bg: rgba(255,255,255,0.06);
          --glass-strong: rgba(255,255,255,0.08);
          --glass-accent: rgba(108,99,255,0.12);
          --accent: #6C63FF;
          --accent-2: #00BFA6;
          --text: #e8eef8;
          --muted: rgba(232,238,248,0.65);
          --radius-lg: 20px;
          --radius: 12px;
          --transition: 300ms cubic-bezier(.2,.9,.2,1);
          --glass-border: rgba(255,255,255,0.08);
          --glass-inner-shadow: rgba(0,0,0,0.35);
        }

        [data-theme="light"]{
          --bg-1: #f6f8fb;
          --bg-2: #eef2f7;
          --glass-bg: rgba(255,255,255,0.85);
          --glass-strong: rgba(255,255,255,0.95);
          --glass-accent: rgba(108,99,255,0.08);
          --accent: #5748E8;
          --accent-2: #07bfa0;
          --text: #111827;
          --muted: rgba(17,24,39,0.6);
          --glass-border: rgba(0,0,0,0.04);
          --glass-inner-shadow: rgba(255,255,255,0.6);
        }

        /* base */
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
          margin:0;
          font-family:'Poppins',sans-serif;
          background: linear-gradient(135deg, var(--bg-1) 0%, var(--bg-2) 100%);
          color:var(--text);
          -webkit-font-smoothing:antialiased;
          -moz-osx-font-smoothing:grayscale;
          transition: color var(--transition);
          padding-bottom:80px;
          position: relative;
          overflow-x: hidden;
        }

        /* Particles container */
        #particles-js {
          position: fixed;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          z-index: -1;
        }

        /* container */
        .container{
          max-width:1200px;
          margin:0 auto;
          padding:24px;
          position: relative;
          z-index: 1;
        }

        /* Liquid glass base utility */
        .glass {
          background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
          border: 1px solid var(--glass-border);
          border-radius: var(--radius);
          backdrop-filter: blur(12px) saturate(180%);
          -webkit-backdrop-filter: blur(12px) saturate(180%);
          box-shadow: 0 8px 32px rgba(0,0,0,0.2), inset 0 1px 0 var(--glass-inner-shadow);
          transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
          position:relative;
          overflow:hidden;
        }

        /* subtle accent layer to mimic iOS specular highlights */
        .glass::before{
          content:"";
          position:absolute;
          inset: -30% -30% auto auto;
          width:60%;
          height:60%;
          background: radial-gradient(closest-side, rgba(255,255,255,0.08), transparent 40%);
          transform: translate(-10%,-10%) rotate(-15deg);
          pointer-events:none;
          mix-blend-mode:overlay;
          filter: blur(18px);
          opacity:0.9;
          transition: opacity var(--transition);
        }

        /* thin highlight at top */
        .glass::after{
          content:"";
          position:absolute;
          left:0;right:0;top:0;
          height:40%;
          background: linear-gradient(180deg, rgba(255,255,255,0.06), transparent 40%);
          pointer-events:none;
          mix-blend-mode:overlay;
        }

        /* Header */
        .header{
          position:sticky;top:12px;z-index:40;
          margin:12px auto 28px;
          padding:12px 20px;
          border-radius:28px;
          display:flex;align-items:center;justify-content:space-between;
          gap:16px;
          box-shadow: 0 8px 32px rgba(0,0,0,0.3);
          backdrop-filter: blur(16px) saturate(180%);
          -webkit-backdrop-filter: blur(16px) saturate(180%);
          border: 1px solid var(--glass-border);
        }
        .header .left{display:flex;align-items:center;gap:14px}
        .logo-img{
          width:54px;height:54px;border-radius:50%;object-fit:cover;
          border: 2px solid rgba(255,255,255,0.12);
          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .logo-text{
          font-weight:800;font-size:1.4rem;
          background:linear-gradient(90deg,var(--accent),var(--accent-2));
          -webkit-background-clip:text;
          background-clip:text;
          color:transparent;
          letter-spacing: -0.5px;
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 60px;
            height: 30px;
            border-radius: 999px;
            padding: 4px;
            display: flex;
            align-items: center;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            position: relative;
        }

        .theme-toggle .knob {
            width: 22px;
            height: 22px;
            border-radius: 999px;
            background: var(--accent);
            position: absolute;
            left: 4px;
            transition: transform var(--transition);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        [data-theme="light"] .theme-toggle .knob {
            transform: translateX(30px);
            background: var(--accent-2);
        }

        .theme-toggle-icons {
            display: flex;
            width: 100%;
            justify-content: space-between;
            padding: 0 6px;
            font-size: 12px;
        }

        /* Hero */
        .events-hero{
          padding:40px 0 20px;
          text-align:center;
          position: relative;
        }
        .events-title{
          font-size:3.2rem;
          margin:10px 0;
          background:linear-gradient(90deg,var(--accent),var(--accent-2));
          -webkit-background-clip:text;
          background-clip:text;
          color:transparent;
          font-weight:800;
          letter-spacing: -1px;
          text-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .events-subtitle{
          color:var(--muted);
          max-width:820px;
          margin:12px auto 30px;
          font-size: 1.1rem;
          line-height: 1.6;
        }

        /* time display */
        .time-display{
          display:flex;
          gap:20px;
          justify-content:center;
          flex-wrap:wrap;
          margin-bottom:28px;
        }
        .time-card{
          min-width:200px;
          padding:20px;
          border-radius:16px;
          display:flex;
          flex-direction:column;
          align-items:center;
          gap:12px;
          border:1px solid var(--glass-border);
          backdrop-filter:blur(12px);
          -webkit-backdrop-filter:blur(12px);
          background:linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
          transition: transform var(--transition);
        }
        .time-card:hover {
          transform: translateY(-5px);
        }
        .time-card i{
          font-size:24px;
          color:var(--accent);
          background: var(--glass-accent);
          width: 50px;
          height: 50px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .time-label{
          font-size:0.9rem;
          opacity:0.8;
          text-align: center;
        }
        .time-value{
          font-family:monospace;
          font-weight:700;
          font-size: 1.3rem;
          letter-spacing: 0.5px;
        }

        /* controls */
        .controls{
          display:flex;
          gap:16px;
          justify-content:center;
          flex-wrap:wrap;
          margin-bottom:24px;
        }
        .search-box{
          display:flex;
          align-items:center;
          gap:12px;
          padding:12px 20px;
          border-radius:999px;
          min-width:300px;
          border:1px solid var(--glass-border);
          background: var(--glass-bg);
          backdrop-filter: blur(10px);
        }
        .search-box input{
          background:transparent;
          border:none;
          outline:none;
          color:var(--text);
          font-size:1rem;
          width:100%;
        }
        .search-box input::placeholder {
          color: var(--muted);
        }
        .filter-row{
          display:flex;
          gap:12px;
          align-items:center;
          flex-wrap:wrap;
        }
        .filter-btn{
          padding:10px 20px;
          border-radius:999px;
          border:1px solid var(--glass-border);
          cursor:pointer;
          background:transparent;
          color:var(--muted);
          transition:all var(--transition);
          font-weight:600;
          font-size: 0.9rem;
        }
        .filter-btn.active{
          background:linear-gradient(90deg,var(--accent),var(--accent-2));
          color:white;
          box-shadow:0 8px 24px rgba(108,99,255,0.3);
          border-color: transparent;
        }

        /* events grid */
        .events-grid{
          display:grid;
          grid-template-columns:repeat(auto-fit,minmax(350px,1fr));
          gap:24px;
          padding-top:16px;
        }
        .event-card{
          border-radius:20px;
          overflow:hidden;
          display:flex;
          flex-direction:column;
          min-height:420px;
          transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition);
          border:1px solid var(--glass-border);
          backdrop-filter:blur(12px);
          -webkit-backdrop-filter:blur(12px);
          background:linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
          position:relative;
        }
        .event-card:hover{
          transform:translateY(-8px) scale(1.02);
          box-shadow:0 20px 40px rgba(0,0,0,0.4);
          border-color: rgba(108,99,255,0.3);
        }

        /* image area with subtle sheen */
        .event-image{
          width:100%;
          height:200px;
          object-fit:cover;
          display:block;
          position:relative;
        }
        .event-image-container{
          position:relative;
          overflow:hidden;
        }
        .event-image-glow{
          position:absolute;
          left:-20%;
          top:-30%;
          width:60%;
          height:60%;
          background:radial-gradient(circle at 30% 20%, rgba(255,255,255,0.12), transparent 35%);
          filter:blur(20px);
          mix-blend-mode:overlay;
          pointer-events:none;
        }

        /* content - IMPROVED */
        .event-content{
          padding:20px;
          display:flex;
          flex-direction:column;
          gap:12px;
          flex:1;
          min-height: 0;
        }
        .event-header{
          display:flex;
          justify-content:space-between;
          align-items:flex-start;
          gap:12px;
          min-height: 60px;
        }
        .event-name{
          font-size:1.2rem;
          font-weight:700;
          line-height: 1.3;
          margin-bottom: 4px;
        }
        .event-type{
          padding:4px 10px;
          border-radius:999px;
          font-weight:700;
          font-size:0.75rem;
          background:linear-gradient(90deg,var(--accent),var(--accent-2));
          color:white;
          display: inline-block;
        }
        .event-date{
          color:var(--muted);
          text-align:right;
          font-weight:600;
          font-size: 0.85rem;
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          gap: 2px;
          min-width: 100px;
        }
        .event-time {
          font-size: 0.8rem;
          font-weight: 500;
        }

        /* timer - IMPROVED */
        .event-timer{
          margin-top:4px;
          padding:12px;
          border-radius:10px;
          background:linear-gradient(135deg, rgba(0,0,0,0.1), rgba(255,255,255,0.03));
          display:flex;
          flex-direction: column;
          align-items: center;
          gap: 8px;
          border: 1px solid var(--glass-border);
          min-height: 80px;
        }
        .timer-value{
          font-family:monospace;
          font-weight:800;
          font-size: 1.2rem;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
          letter-spacing: 0.5px;
          flex-wrap: wrap;
        }
        .timer-unit{
          font-size:0.75rem;
          color:var(--muted);
          margin-left:1px;
          font-weight: 600;
        }

        /* status badges - IMPROVED */
        .event-status{
          display:inline-flex;
          align-items:center;
          gap:6px;
          padding:6px 12px;
          border-radius:999px;
          font-weight:700;
          background: var(--glass-bg);
          border: 1px solid var(--glass-border);
          backdrop-filter: blur(8px);
          -webkit-backdrop-filter: blur(8px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          align-self: flex-start;
          font-size: 0.8rem;
          margin-top: 4px;
        }
        .status-live{
          color:#4CAF50;
          border-color: rgba(76,175,80,0.3);
          background: rgba(76,175,80,0.1);
        }
        .status-coming{
          color:#2196F3;
          border-color: rgba(33,150,243,0.3);
          background: rgba(33,150,243,0.1);
        }
        .status-ended{
          color:#F44336;
          border-color: rgba(244,67,54,0.3);
          background: rgba(244,67,54,0.1);
        }

        /* live pulse (subtle) */
        .event-card.live::after{
          content:"";
          position:absolute;
          inset:0;
          border-radius:20px;
          pointer-events:none;
          box-shadow:0 0 60px rgba(108,99,255,0.1), inset 0 0 80px rgba(108,99,255,0.05);
          animation: breathe 3s ease-in-out infinite;
        }
        @keyframes breathe{
          0%{opacity:0.5}
          50%{opacity:0.8}
          100%{opacity:0.5}
        }

        /* scroll top */
        .scroll-top{
          position:fixed;
          bottom:30px;
          right:30px;
          width:56px;
          height:56px;
          border-radius:999px;
          display:flex;
          align-items:center;
          justify-content:center;
          background:linear-gradient(135deg,var(--accent),var(--accent-2));
          color:white;
          box-shadow:0 12px 30px rgba(0,0,0,0.4);
          cursor:pointer;
          transform:translateY(20px);
          opacity:0;
          visibility:hidden;
          transition:all var(--transition);
          border: none;
          z-index: 100;
        }
        .scroll-top:hover{
          transform: translateY(-5px);
          box-shadow: 0 16px 40px rgba(108,99,255,0.4);
        }
        .scroll-top.visible{
          transform:translateY(0);
          opacity:1;
          visibility:visible;
        }

        /* Footer */
        .footer {
          max-width: 1200px;
          margin: 40px auto 20px;
          padding: 24px;
          text-align: center;
          border-top: 1px solid var(--glass-border);
          color: var(--muted);
          font-size: 0.9rem;
        }

        /* responsive tweaks */
        @media (max-width: 1100px){
          .events-grid{
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
          }
        }

        @media (max-width: 900px){
          .events-title{font-size:2.5rem}
          .header{padding:10px 16px}
          .time-display{gap: 16px;}
          .time-card{min-width: 170px;}
        }

        @media (max-width: 768px){
          .events-hero{padding: 30px 0 15px;}
          .events-title{font-size:2.2rem}
          .events-subtitle{font-size: 1rem;}
          .controls{flex-direction: column; align-items: center;}
          .search-box{min-width: 100%; max-width: 400px;}
          .time-display{gap: 12px;}
          .time-card{min-width: 160px; padding: 16px;}
        }

        @media (max-width: 480px){
          body{padding-bottom:100px}
          .events-title{font-size:1.8rem}
          .event-image{height:180px}
          .time-card{min-width: 140px;}
          .time-value{font-size: 1.1rem;}
          .events-grid{
            grid-template-columns: 1fr;
            gap: 20px;
          }
          .container{padding: 16px;}
          .event-content{padding: 20px;}
        }

        /* ripple hover (liquid feel) */
        .event-card .ripple {
          position:absolute;
          left:50%;
          top:50%;
          transform:translate(-50%,-50%) scale(0);
          border-radius:999px;
          background: radial-gradient(circle, rgba(255,255,255,0.08), transparent 40%);
          width:10px;
          height:10px;
          pointer-events:none;
          opacity:0;
          transition:all 600ms cubic-bezier(.2,.9,.2,1);
        }
        .ripple.active{
          transform:translate(-50%,-50%) scale(20);
          opacity:1;
          transition:all 900ms cubic-bezier(.2,.9,.2,1);
        }

        /* Loading animation */
        .loading {
          display: inline-block;
          width: 20px;
          height: 20px;
          border: 3px solid rgba(255,255,255,.3);
          border-radius: 50%;
          border-top-color: var(--accent);
          animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        /* No results message */
        .no-results {
          text-align: center;
          padding: 60px 20px;
          grid-column: 1 / -1;
          color: var(--muted);
          font-size: 1.1rem;
        }

        /* Sort dropdown */
        .sort-container {
          display: flex;
          justify-content: center;
          margin: 15px 0;
        }

        .sort-select {
          background: var(--glass-bg);
          border: 1px solid var(--glass-border);
          border-radius: var(--radius);
          color: var(--text);
          padding: 12px 20px;
          outline: none;
          cursor: pointer;
          backdrop-filter: blur(10px);
          min-width: 250px;
        }

        .sort-select option {
          background: var(--bg-1);
          color: var(--text);
        }
    </style>
</head>
<body>
  <!-- Particles Container -->
  <div id="particles-js"></div>

  <div class="container">
    <!-- Header -->
    <header class="header glass" role="banner">
      <div class="left">
        <a href="index" class="logo" style="display:flex;align-items:center;gap:12px;text-decoration:none">
          <img class="logo-img" src="https://yt3.googleusercontent.com/RPW5Z_kcoEu0ES_VpL4-7ZqI4eI1OQfuVL-DbuCYWmRhXono9hA5NOCSGGMDLzJqNcHUlhOg=s160-c-k-c0x00ffffff-no-rj" alt="Bari Plux">
          <span class="logo-text">Bari Plux</span>
        </a>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <div id="theme-toggle" class="theme-toggle glass" aria-hidden="true" title="Toggle Theme">
          <div class="theme-toggle-icons">
            <div style="font-size:12px;color:var(--muted)">üåô</div>
            <div style="font-size:12px;color:var(--muted)">‚òÄÔ∏è</div>
          </div>
          <div class="knob" id="theme-knob"></div>
        </div>

        <a href="index" class="glass back-btn" style="padding:10px 20px;border-radius:999px;text-decoration:none;color:var(--text);font-weight:600;display:flex;align-items:center;gap:8px">
          <i class="fas fa-arrow-left"></i>
          Tilbake til hjemmesiden
        </a>
      </div>
    </header>

    <!-- Hero -->
    <section class="events-hero">
      <h1 class="events-title">Skole√•r 2025/2026</h1>
      <p class="events-subtitle">Fullstendig oversikt over alle kommende og p√•g√•ende hendelser med live nedtelling. Alle tider er i norsk tid (CET/CEST).</p>

      <div class="time-display">
        <div class="time-card glass">
          <i class="fas fa-clock"></i>
          <div class="time-label">Norsk tid n√•</div>
          <div class="time-value" id="current-norway-time">--:--:--</div>
        </div>
        <div class="time-card glass">
          <i class="fas fa-calendar-day"></i>
          <div class="time-label">Dagens dato (Norge)</div>
          <div class="time-value" id="current-norway-date">-- -- ----</div>
        </div>
        <div class="time-card glass">
          <i class="fas fa-globe"></i>
          <div class="time-label">Tidssone</div>
          <div class="time-value">CET/CEST</div>
        </div>
      </div>

      <div class="controls">
        <div class="search-box glass" role="search" aria-label="Search events">
          <i class="fas fa-search" style="color:var(--muted)"></i>
          <input id="search-input" placeholder="S√∏k etter hendelser..." aria-label="search events">
        </div>

        <div class="filter-row">
          <button class="filter-btn active" data-filter="all">Alle hendelser</button>
          <button class="filter-btn" data-filter="live">P√•g√•ende n√•</button>
          <button class="filter-btn" data-filter="upcoming">Kommende</button>
          <button class="filter-btn" data-filter="ended">Avsluttet</button>
        </div>
      </div>

      <div class="sort-container">
        <select class="sort-select glass" id="sort-select">
          <option value="date-asc">Dato: Tidligst f√∏rst</option>
          <option value="date-desc">Dato: Senest f√∏rst</option>
          <option value="name">Navn: A til √Ö</option>
          <option value="status">Status: Live f√∏rst</option>
        </select>
      </div>
    </section>

    <!-- Events Grid -->
    <main class="events-grid" id="events-container" aria-live="polite">
      <!-- Events will be dynamically inserted here -->
    </main>

    <!-- Footer -->
    <footer class="footer glass">
      <div>¬© 2026 Bari Plux. Alle rettigheter forbeholdt.</div>
    </footer>
  </div>

  <!-- Scroll to top -->
  <div id="scroll-top" class="scroll-top" title="Back to top">
    <i class="fas fa-arrow-up"></i>
  </div>

<script>
/* -------------------------
  Data (Norwegian dates & times)
----------------------------*/
const events = [
  {
      name: "H√∏stferien",
      type: "Ferie",
      date: "2025-09-29",
      time: "10:00",
      image: "https://c.tadst.com/gfx/600x337/bat-vann-lofoten.jpg",
      description: "ma. 29.09.2025 - fr. 03.10.2025"
  },
  {
      name: "Juleferie",
      type: "Ferie",
      date: "2025-12-22",
      time: "00:00",
      image: "https://c.tadst.com/gfx/750w/juletre-oslo.jpg",
      description: "ma. 22.12.2025 - fr. 02.01.2026"
  },
  {
      name: "Vinterferie",
      type: "Ferie",
      date: "2026-02-23",
      time: "00:00",
      image: "https://c.tadst.com/gfx/600x337/family-skiing-winter.jpg",
      description: "ma. 23.02.2026 - fr. 27.02.2026"
  },
  {
      name: "Eid al-Fitr",
      type: "Ferie",
      date: "2026-03-19",
      time: "06:00",
      image: "https://encrypted-tbn1.gstatic.com/licensed-image?q=tbn:ANd9GcS0Yw6agXnSmLqyrci5CTI3AWml803oG3k7g-mN5rorHuE9fO9IitZxjTqXNZMFCwDHgwj5EZOR48hQo50DvTUoIV3yC_VGog",
      description: "to. 19.03.2026 - fr. 20.03.2026"
  },
  {
      name: "P√•skeferie",
      type: "Ferie",
      date: "2026-03-30",
      time: "00:00",
      image: "https://c.tadst.com/gfx/600x337/ski-sn-fjell-folk.jpg",
      description: "ma. 30.03.2026 - ma. 06.04.2026"
  },
  {
      name: "Arbeidernes dag",
      type: "Helligdag",
      date: "2026-05-01",
      time: "00:00",
      image: "https://norskukekalender.com/wp-content/uploads/2025/03/1.-Mai-Arbeidernes-Dag-Fagforeningene-1024x494.webp",
      description: "fr. 01.05.2026"
  },
  {
      name: "Kristi himmelfartsdag",
      type: "Helligdag",
      date: "2026-05-14",
      time: "00:00",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7ZULEhzlorgEASZDuLAtNMWhGrjbumLksvw&s",
      description: "to. 14.05.2026"
  },
  {
      name: "17. mai",
      type: "Helligdag",
      date: "2026-05-17",
      time: "00:00",
      image: "https://i.postimg.cc/3x8870kM/image.png",
      description: "s√∏. 17.05.2026"
  },
  {
      name: "2. pinsedag",
      type: "Helligdag",
      date: "2026-05-25",
      time: "00:00",
      image: "https://i.postimg.cc/9f4KdcD8/image.png",
      description: "ma. 25.05.2026"
  },
  {
      name: "Eid al-Adha",
      type: "Helligdag",
      date: "2026-05-26",
      time: "06:00",
      image: "https://encrypted-tbn3.gstatic.com/licensed-image?q=tbn:ANd9GcSCGEvcghJykLBDBiFKTmV7YeCyS7sB0WeC0yJv9P21s17yaUw1lfdh2tVU3qIelWtthhOo__TCFewnzs7v9RmRt-7ZyfiQBw",
      description: "ti. 26.05.2026 - on. 27.05.2026"
  },
  {
      name: "Sommerferie",
      type: "Ferie",
      date: "2026-06-22",
      time: "00:00",
      image: "https://cdn.content.tuigroup.com/adamtui/2021_1/26_11/21377600-a6ae-4a91-bbd7-acbc00bdbe3b/beach-sunset-tui-blue-olhuveli-south-male-atoll-maldivesWebOriginalCompressed.jpg?i10c=img.resize(width:1920);img.crop(width:1920,height:820)",
      description: "ma. 22.06.2026 - fr. 31.07.2026"
  },
  {
      name: "F√∏rste skoledag",
      type: "Skole",
      date: "2026-08-17",
      time: "08:30",
      image: "https://senja.vgs.no/handlers/bv.ashx/i15647be9-9b00-42e6-a9d2-21caaaddea30/w1200/q15761/kc979bd44bd22/skolestart.jpg",
      description: "Skole√•ret 2026/2027 starter"
  }
];

/* -------------------------
  Helpers
----------------------------*/
function getNorwayTime() {
    const now = new Date();
    const options = {
        timeZone: 'Europe/Oslo',
        hour12: false,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    };
    
    const timeString = now.toLocaleTimeString('nb-NO', options);
    const dateString = now.toLocaleDateString('nb-NO', {
        timeZone: 'Europe/Oslo',
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
    
    return {
        time: timeString,
        date: dateString
    };
}

function updateNorwayTime(){
  const norwayTime = getNorwayTime();
  document.getElementById('current-norway-time').textContent = norwayTime.time;
  document.getElementById('current-norway-date').textContent = norwayTime.date;
}

/* compute remaining in ms */
function getRemainingNorway(dateStr,timeStr){
  const eventDateTime = new Date(`${dateStr}T${timeStr}:00+01:00`).getTime();
  const now = Date.now();
  return eventDateTime - now;
}

function getStatus(dateStr,timeStr){
  const remaining = getRemainingNorway(dateStr,timeStr);
  if (remaining <= 0) return 'ended';
  if (remaining <= 24*3600*1000) return 'live';
  return 'upcoming';
}

/* format date for display */
function formatEventDate(dateString){
  const d = new Date(dateString + 'T00:00:00+01:00');
  return d.toLocaleDateString('nb-NO', { 
    weekday: 'short', 
    month: 'short', 
    day: 'numeric'
  });
}

/* -------------------------
  Render cards
----------------------------*/
function createEventCard(item, idx){
  const status = getStatus(item.date,item.time);
  const formattedDate = formatEventDate(item.date);
  const statusClass = status === 'live' ? 'status-live' : status === 'upcoming' ? 'status-coming' : 'status-ended';
  const statusText = status === 'live' ? 'P√•g√•ende n√•' : status === 'upcoming' ? 'Kommende' : 'Avsluttet';
  const card = document.createElement('article');
  card.className = 'event-card glass' + (status==='live' ? ' live' : '');
  card.setAttribute('data-status', status);
  card.setAttribute('data-name', item.name.toLowerCase());
  card.setAttribute('data-date', item.date);
  
  let imageHtml = '';
  if (item.image) {
    imageHtml = `
      <div class="event-image-container">
        <img loading="lazy" class="event-image" src="${item.image}" alt="${item.name}">
        <div class="event-image-glow"></div>
      </div>
    `;
  } else {
    const eventType = item.type || 'Event';
    imageHtml = `<div class="event-image" style="background: linear-gradient(135deg, var(--accent), var(--accent-2)); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">${eventType}</div>`;
  }
  
  card.innerHTML = `
    ${imageHtml}
    <div class="event-content">
      <div class="event-header">
        <div>
          <h3 class="event-name">${item.name}</h3>
          <span class="event-type">${item.type}</span>
        </div>
        <div class="event-date">
          <div>${formattedDate}</div>
          <div class="event-time">${item.time} CET/CEST</div>
        </div>
      </div>
      
      <div class="event-timer">
        <div style="font-size:0.9rem;color:var(--muted);text-align:center;font-weight:600">TID IGJEN</div>
        <div class="timer-value" id="timer-${idx}">
          <span class="v-days">0</span><span class="timer-unit">d</span>
          <span style="margin-inline:6px"></span>
          <span class="v-hours">00</span><span class="timer-unit">t</span>
          <span style="margin-inline:6px"></span>
          <span class="v-minutes">00</span><span class="timer-unit">m</span>
          <span style="margin-inline:6px"></span>
          <span class="v-seconds">00</span><span class="timer-unit">s</span>
        </div>
      </div>

      <div class="event-status ${statusClass}">
        <i class="fas ${status==='live'?'fa-broadcast-tower':status==='upcoming'?'fa-hourglass-half':'fa-flag-checkered'}"></i>${statusText}
      </div>

      <p class="event-description">${item.description}</p>
    </div>
    <div class="ripple" aria-hidden="true"></div>
  `;
  
  // ripple effect
  card.addEventListener('pointerdown', function(e){
    const r = card.querySelector('.ripple');
    r.classList.remove('active');
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    r.style.left = x + 'px';
    r.style.top = y + 'px';
    requestAnimationFrame(function(){
      r.classList.add('active');
    });
    setTimeout(function(){
      r.classList.remove('active');
    },900);
  });

  return card;
}

function renderEvents(){
  const container = document.getElementById('events-container');
  container.innerHTML='';
  
  if (events.length === 0) {
    container.innerHTML = '<div class="no-results glass">Ingen hendelser funnet som samsvarer med s√∏ket ditt.</div>';
    return;
  }
  
  events.forEach(function(ev, i){
    container.appendChild(createEventCard(ev,i));
  });
}

/* -------------------------
  Timers update
----------------------------*/
function updateAllTimers(){
  events.forEach(function(ev, i){
    const rem = getRemainingNorway(ev.date,ev.time);
    const el = document.getElementById('timer-' + i);
    if (!el) return;
    if (rem <= 0){
      el.innerHTML = '<span style="color: var(--muted); font-size: 1rem;">HENDELSEN ER AVSLUTTET</span>';
      const card = el.closest('.event-card');
      if (card) { 
        card.classList.remove('live'); 
        card.setAttribute('data-status','ended'); 
      }
      return;
    }
    const days = Math.floor(rem / (1000*60*60*24));
    const hours = Math.floor((rem / (1000*60*60)) % 24);
    const minutes = Math.floor((rem / (1000*60)) % 60);
    const seconds = Math.floor((rem / 1000) % 60);
    
    const daysEl = el.querySelector('.v-days');
    const hoursEl = el.querySelector('.v-hours');
    const minutesEl = el.querySelector('.v-minutes');
    const secondsEl = el.querySelector('.v-seconds');
    
    if (daysEl) daysEl.textContent = days;
    if (hoursEl) hoursEl.textContent = String(hours).padStart(2,'0');
    if (minutesEl) minutesEl.textContent = String(minutes).padStart(2,'0');
    if (secondsEl) secondsEl.textContent = String(seconds).padStart(2,'0');

    // update status classes if needed
    const status = getStatus(ev.date,ev.time);
    const card = el.closest('.event-card');
    if (card){
      card.setAttribute('data-status',status);
      if (status === 'live') {
        card.classList.add('live');
      } else {
        card.classList.remove('live');
      }
      const statusEl = card.querySelector('.event-status');
      if (statusEl){
        statusEl.className = 'event-status ' + (status==='live'?'status-live':status==='upcoming'?'status-coming':'status-ended');
        statusEl.innerHTML = `<i class="fas ${status==='live'?'fa-broadcast-tower':status==='upcoming'?'fa-hourglass-half':'fa-flag-checkered'}"></i> ${status==='live'?'P√•g√•ende n√•':status==='upcoming'?'Kommende':'Avsluttet'}`;
      }
    }
  });
}

/* -------------------------
  Filters, search, sort
----------------------------*/
function setupFilters(){
  const filterButtons = document.querySelectorAll('.filter-btn');
  
  filterButtons.forEach(function(btn){
    btn.addEventListener('click', function(){
      filterButtons.forEach(function(b){
        b.classList.remove('active');
      });
      
      btn.classList.add('active');
      
      const filter = btn.getAttribute('data-filter');
      applyFilter(filter);
    });
  });
}

function applyFilter(filter){
  const term = document.getElementById('search-input').value.trim().toLowerCase();
  const eventCards = document.querySelectorAll('.event-card');
  
  eventCards.forEach(function(card){
    const status = card.getAttribute('data-status');
    const name = card.getAttribute('data-name');
    const description = card.querySelector('.event-description').textContent.toLowerCase();
    
    const matchesFilter = filter==='all' ? true : status===filter;
    const matchesSearch = term === '' ? true : (name.includes(term) || description.includes(term));
    
    if (matchesFilter && matchesSearch) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

function setupSort(){
  const sortSelect = document.getElementById('sort-select');
  
  sortSelect.addEventListener('change', function(){
    sortEvents(this.value);
  });
}

function sortEvents(sortBy){
  const eventsContainer = document.getElementById('events-container');
  const eventCards = Array.from(eventsContainer.querySelectorAll('.event-card'));
  
  eventCards.sort((a, b) => {
    switch(sortBy) {
      case 'date-asc':
        return new Date(a.getAttribute('data-date')) - new Date(b.getAttribute('data-date'));
      case 'date-desc':
        return new Date(b.getAttribute('data-date')) - new Date(a.getAttribute('data-date'));
      case 'name':
        return a.querySelector('.event-name').textContent.localeCompare(b.querySelector('.event-name').textContent, 'nb');
      case 'status':
        const statusOrder = { 'live': 0, 'upcoming': 1, 'ended': 2 };
        return statusOrder[a.getAttribute('data-status')] - statusOrder[b.getAttribute('data-status')];
      default:
        return 0;
    }
  });
  
  eventsContainer.innerHTML = '';
  eventCards.forEach(card => eventsContainer.appendChild(card));
}

/* -------------------------
  Theme toggle
----------------------------*/
function setupThemeToggle(){
  const stored = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  document.documentElement.setAttribute('data-theme', stored);
  document.getElementById('theme-toggle').addEventListener('click', function(){
    const current = document.documentElement.getAttribute('data-theme');
    const next = current === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
  });
}

/* -------------------------
  Misc UI
----------------------------*/
function setupScrollTop(){
  const btn = document.getElementById('scroll-top');
  window.addEventListener('scroll', function(){
    if (window.pageYOffset > 350) {
      btn.classList.add('visible');
    } else {
      btn.classList.remove('visible');
    }
  });
  btn.addEventListener('click', function(){
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
}

/* search input */
document.addEventListener('input', function(e){
  if (e.target && e.target.id === 'search-input'){
    const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
    applyFilter(activeFilter);
  }
});

/* -------------------------
  Particles.js Configuration
----------------------------*/
function initParticles() {
  if (typeof particlesJS !== 'undefined') {
    particlesJS('particles-js', {
      "particles": {
        "number": {
          "value": 80,
          "density": {
            "enable": true,
            "value_area": 800
          }
        },
        "color": {
          "value": "#6C63FF"
        },
        "shape": {
          "type": "circle",
          "stroke": {
            "width": 0,
            "color": "#000000"
          }
        },
        "opacity": {
          "value": 0.5,
          "random": false,
          "anim": {
            "enable": false,
            "speed": 1,
            "opacity_min": 0.1,
            "sync": false
          }
        },
        "size": {
          "value": 3,
          "random": true,
          "anim": {
            "enable": false,
            "speed": 40,
            "size_min": 0.1,
            "sync": false
          }
        },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#6C63FF",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 6,
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "bounce": false,
          "attract": {
            "enable": false,
            "rotateX": 600,
            "rotateY": 1200
          }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {
            "enable": true,
            "mode": "grab"
          },
          "onclick": {
            "enable": true,
            "mode": "push"
          },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 140,
            "line_linked": {
              "opacity": 1
            }
          },
          "bubble": {
            "distance": 400,
            "size": 40,
            "duration": 2,
            "opacity": 8,
            "speed": 3
          },
          "repulse": {
            "distance": 200,
            "duration": 0.4
          },
          "push": {
            "particles_nb": 4
          },
          "remove": {
            "particles_nb": 2
          }
        }
      },
      "retina_detect": true
    });
  }
}

/* initialize everything */
document.addEventListener('DOMContentLoaded', function(){
  updateNorwayTime();
  setInterval(updateNorwayTime,1000);
  renderEvents();
  updateAllTimers();
  setInterval(updateAllTimers,1000);
  setupFilters();
  setupSort();
  setupThemeToggle();
  setupScrollTop();
  initParticles();
});
</script>
</body>
</html>